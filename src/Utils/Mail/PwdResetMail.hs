module Utils.Mail.PwdResetMail where

import qualified Data.Text as T
import Network.Mail.Mime (ImageContent (ImageFilePath), InlineImage (..))
import Server.Config
import Utils.Mail.Common


pwdResetMailHtml :: T.Text -> T.Text -> T.Text
pwdResetMailHtml name link = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional //EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:v=\"urn:schemas-microsoft-com:vml\"> <head><!--[if gte mso 9]><xml ><o:OfficeDocumentSettings ><o:AllowPNG/><o:PixelsPerInch>96</o:PixelsPerInch></o:OfficeDocumentSettings ></xml ><! [endif]--> <meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/> <meta content=\"width=device-width\" name=\"viewport\"/> <meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/> <title></title> <style type=\"text/css\"> body{margin: 0; padding: 0;}table, td, tr{vertical-align: top; border-collapse: collapse;}*{line-height: inherit;}a[x-apple-data-detectors=\"true\"]{color: inherit !important; text-decoration: none !important;}</style> <style id=\"media-query\" type=\"text/css\"> @media (max-width: 520px){.block-grid, .col{min-width: 320px !important; max-width: 100% !important; display: block !important;}.block-grid{width: 100% !important;}.col{width: 100% !important;}.col_cont{margin: 0 auto;}img.fullwidth, img.fullwidthOnMobile{max-width: 100% !important;}.no-stack .col{min-width: 0 !important; display: table-cell !important;}.no-stack.two-up .col{width: 50% !important;}.no-stack .col.num2{width: 16.6% !important;}.no-stack .col.num3{width: 25% !important;}.no-stack .col.num4{width: 33% !important;}.no-stack .col.num5{width: 41.6% !important;}.no-stack .col.num6{width: 50% !important;}.no-stack .col.num7{width: 58.3% !important;}.no-stack .col.num8{width: 66.6% !important;}.no-stack .col.num9{width: 75% !important;}.no-stack .col.num10{width: 83.3% !important;}.video-block{max-width: none !important;}.mobile_hide{min-height: 0px; max-height: 0px; max-width: 0px; display: none; overflow: hidden; font-size: 0px;}.desktop_hide{display: block !important; max-height: none !important;}}</style> </head> <body class=\"clean-body\" style=\"margin: 0; padding: 0; -webkit-text-size-adjust: 100%; background-color: #ffffff\" > <table bgcolor=\"#FFFFFF\" cellpadding=\"0\" cellspacing=\"0\" class=\"nl-container\" role=\"presentation\" style=\" table-layout: fixed; vertical-align: top; min-width: 320px; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #ffffff; width: 100%; \" valign=\"top\" width=\"100%\" > <tbody> <tr style=\"vertical-align: top\" valign=\"top\"> <td style=\"word-break: break-word; vertical-align: top\" valign=\"top\"> <div style=\"background-color: transparent\"> <div class=\"block-grid\" style=\" min-width: 320px; max-width: 500px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: transparent; \" > <div style=\" border-collapse: collapse; display: table; width: 100%; background-color: transparent; \" > <div class=\"col num12\" style=\" min-width: 320px; max-width: 500px; display: table-cell; vertical-align: top; width: 500px; \" > <div class=\"col_cont\" style=\"width: 100% !important\"> <div style=\" border-top: 0px solid transparent; border-left: 0px solid transparent; border-bottom: 0px solid transparent; border-right: 0px solid transparent; padding-top: 5px; padding-bottom: 5px; padding-right: 0px; padding-left: 0px; \" > <div align=\"left\" class=\"img-container left fixedwidth\" style=\"padding-right: 0px; padding-left: 0px\" ><!--[if mso]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr style=\"line-height:0px\"><td style=\"padding-right: 0px;padding-left: 0px;\" align=\"left\"><! [endif]--><img alt=\"Alternate text\" border=\"0\" class=\"left fixedwidth\" src=\"cid:requestLogo.png\" style=\" text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 100%; max-width: 150px; display: block; \" title=\"Alternate text\" width=\"150\"/> </div><div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" ><span style=\"font-size: 14px\">Hey " <> name <> ", </span ><span style=\"font-size: 14px\" >Somebody just requested a password reset link to be sent to this very email address. If it was you, please click the following link to complete the password reset process.</span ></div > </div><div align=\"center\" class=\"button-container\" style=\" padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" ><!--[if mso]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"border-spacing: 0; border-collapse: collapse; mso-table-lspace:0pt; mso-table-rspace:0pt;\"><tr><td style=\"padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px\" align=\"center\"><v:roundrect xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" href=\"" <> link <> "\" style=\"height:31.5pt; width:158.25pt; v-text-anchor:middle;\" arcsize=\"15%\" stroke=\"false\" fillcolor=\"#4fd1c5\"><w:anchorlock/><v:textbox inset=\"0,0,0,0\"><center style=\"color:#ffffff; font-family:Arial, sans-serif; font-size:14px\"><! [endif]--><a href=\"" <> link <> "\" style=\" -webkit-text-size-adjust: none; text-decoration: none; display: inline-block; color: #ffffff; background-color: #4fd1c5; border-radius: 6px; -webkit-border-radius: 6px; -moz-border-radius: 6px; width: auto; width: auto; border-top: 1px solid #4fd1c5; border-right: 1px solid #4fd1c5; border-bottom: 1px solid #4fd1c5; border-left: 1px solid #4fd1c5; padding-top: 5px; padding-bottom: 5px; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; text-align: center; mso-border-alt: none; word-break: keep-all; \" target=\"_blank\" ><span style=\" padding-left: 20px; padding-right: 20px; font-size: 14px; display: inline-block; \" ><span style=\"line-height: 24px; word-break: break-word\" ><strong ><span data-mce-style=\"font-size: 14px; line-height: 28px;\" style=\"font-size: 14px; line-height: 28px\" >Reset my password</span ></strong ></span ></span ></a > </div><div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" > <p style=\" font-size: 14px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 17px; margin: 0; \" >If it <em>wasn\'t</em> you, don\'t panick, somebody probably just mistyped their email address. Simply ignore this email and that\'s it.</p > </div></div><div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" > <p style=\" font-size: 14px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 17px; margin: 0; \" >Regards,</p > <p style=\" font-size: 14px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 17px; margin: 0; \" >The Request 2 team</p > </div></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"divider\" role=\"presentation\" style=\" table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; \" valign=\"top\" width=\"100%\" > <tbody> <tr style=\"vertical-align: top\" valign=\"top\"> <td class=\"divider_inner\" style=\" word-break: break-word; vertical-align: top; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" valign=\"top\" > <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"divider_content\" role=\"presentation\" style=\" table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-top: 1px solid #bbbbbb; width: 100%; \" valign=\"top\" width=\"100%\" > <tbody> <tr style=\"vertical-align: top\" valign=\"top\"> <td style=\" word-break: break-word; vertical-align: top; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; \" valign=\"top\" ><span></span ></td></tr></tbody> </table> </td></tr></tbody> </table> <div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 0px; padding-right: 10px; padding-bottom: 0px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" > <p style=\" font-size: 10px; line-height: 1.2; word-break: break-word; text-align: center; mso-line-height-alt: 12px; margin: 0; \" ><span style=\"font-size: 10px\" >Don\'t reply to this email, it was generated automatically. </span></p > <p style=\" font-size: 10px; line-height: 1.2; word-break: break-word; text-align: center; mso-line-height-alt: 12px; margin: 0; \" ><span style=\"font-size: 10px\" >If you have any questions, please contact our support directly.</span ></p > </div></div></div></div></div></div></div></div></td></tr></tbody> </table> </body></html>"


pwdResetMailStr :: T.Text -> T.Text -> T.Text
pwdResetMailStr name link = "Hey " <> name <> ",\n\nSomebody just requested a password reset link to be sent to this very email address. If it was you, please click the following link to complete the password reset process: " <> link <> "\n\nIf it wasn\'t you, don\'t panick, somebody probably just mistyped their email address. Simply ignore this email and that\'s it.\n\nRegards,\nThe Request 2 team\n\nDon\'t reply to this email, it was generated automatically.\nIf you have any questions, please contact our support directly.\n\n"


pwdResetMail :: Config -> Address -> T.Text -> T.Text -> IO Mail
pwdResetMail cfg to name link =
    htmlMail'
        cfg
        to
        "Password reset for your Request 2 account"
        (pwdResetMailStr name link)
        (pwdResetMailHtml name link)
        [InlineImage "HeaderImage" (ImageFilePath "frontend/src/assets/request2.png") "requestLogo.png"]


userDoesNotExistHtml :: T.Text
userDoesNotExistHtml = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional //EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:v=\"urn:schemas-microsoft-com:vml\"> <head><!--[if gte mso 9]><xml ><o:OfficeDocumentSettings ><o:AllowPNG/><o:PixelsPerInch>96</o:PixelsPerInch></o:OfficeDocumentSettings ></xml ><! [endif]--> <meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\"/> <meta content=\"width=device-width\" name=\"viewport\"/> <meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"/> <title></title> <style type=\"text/css\"> body{margin: 0; padding: 0;}table, td, tr{vertical-align: top; border-collapse: collapse;}*{line-height: inherit;}a[x-apple-data-detectors=\"true\"]{color: inherit !important; text-decoration: none !important;}</style> <style id=\"media-query\" type=\"text/css\"> @media (max-width: 520px){.block-grid, .col{min-width: 320px !important; max-width: 100% !important; display: block !important;}.block-grid{width: 100% !important;}.col{width: 100% !important;}.col_cont{margin: 0 auto;}img.fullwidth, img.fullwidthOnMobile{max-width: 100% !important;}.no-stack .col{min-width: 0 !important; display: table-cell !important;}.no-stack.two-up .col{width: 50% !important;}.no-stack .col.num2{width: 16.6% !important;}.no-stack .col.num3{width: 25% !important;}.no-stack .col.num4{width: 33% !important;}.no-stack .col.num5{width: 41.6% !important;}.no-stack .col.num6{width: 50% !important;}.no-stack .col.num7{width: 58.3% !important;}.no-stack .col.num8{width: 66.6% !important;}.no-stack .col.num9{width: 75% !important;}.no-stack .col.num10{width: 83.3% !important;}.video-block{max-width: none !important;}.mobile_hide{min-height: 0px; max-height: 0px; max-width: 0px; display: none; overflow: hidden; font-size: 0px;}.desktop_hide{display: block !important; max-height: none !important;}}</style> </head> <body class=\"clean-body\" style=\"margin: 0; padding: 0; -webkit-text-size-adjust: 100%; background-color: #ffffff\" > <table bgcolor=\"#FFFFFF\" cellpadding=\"0\" cellspacing=\"0\" class=\"nl-container\" role=\"presentation\" style=\" table-layout: fixed; vertical-align: top; min-width: 320px; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #ffffff; width: 100%; \" valign=\"top\" width=\"100%\" > <tbody> <tr style=\"vertical-align: top\" valign=\"top\"> <td style=\"word-break: break-word; vertical-align: top\" valign=\"top\"> <div style=\"background-color: transparent\"> <div class=\"block-grid\" style=\" min-width: 320px; max-width: 500px; overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; margin: 0 auto; background-color: transparent; \" > <div style=\" border-collapse: collapse; display: table; width: 100%; background-color: transparent; \" > <div class=\"col num12\" style=\" min-width: 320px; max-width: 500px; display: table-cell; vertical-align: top; width: 500px; \" > <div class=\"col_cont\" style=\"width: 100% !important\"> <div style=\" border-top: 0px solid transparent; border-left: 0px solid transparent; border-bottom: 0px solid transparent; border-right: 0px solid transparent; padding-top: 5px; padding-bottom: 5px; padding-right: 0px; padding-left: 0px; \" > <div align=\"left\" class=\"img-container left fixedwidth\" style=\"padding-right: 0px; padding-left: 0px\" ><!--[if mso]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr style=\"line-height:0px\"><td style=\"padding-right: 0px;padding-left: 0px;\" align=\"left\"><! [endif]--><img alt=\"Alternate text\" border=\"0\" class=\"left fixedwidth\" src=\"cid:requestLogo.png\" style=\" text-decoration: none; -ms-interpolation-mode: bicubic; height: auto; border: 0; width: 100%; max-width: 150px; display: block; \" title=\"Alternate text\" width=\"150\"/> </div><div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" ><span style=\"font-size: 14px\">Hey, </span ><span style=\"font-size: 14px\" >Somebody just requested a password reset link to be sent to this very email address, however <strong>there is no account asociated with it</strong>.<br/></span ></div></div><div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" > <p style=\" font-size: 14px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 17px; margin: 0; \" >If you didn\'t make this request, you can safely ignore this email, otherwise please make sure that you\'re entering an email address which is connected to your Request 2 account.</p > </div></div><div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" > <p style=\" font-size: 14px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 17px; margin: 0; \" >Regards,</p > <p style=\" font-size: 14px; line-height: 1.2; word-break: break-word; mso-line-height-alt: 17px; margin: 0; \" >The Request 2 team</p > </div></div><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"divider\" role=\"presentation\" style=\" table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; \" valign=\"top\" width=\"100%\" > <tbody> <tr style=\"vertical-align: top\" valign=\"top\"> <td class=\"divider_inner\" style=\" word-break: break-word; vertical-align: top; min-width: 100%; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; \" valign=\"top\" > <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"divider_content\" role=\"presentation\" style=\" table-layout: fixed; vertical-align: top; border-spacing: 0; border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-top: 1px solid #bbbbbb; width: 100%; \" valign=\"top\" width=\"100%\" > <tbody> <tr style=\"vertical-align: top\" valign=\"top\"> <td style=\" word-break: break-word; vertical-align: top; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; \" valign=\"top\" ><span></span ></td></tr></tbody> </table> </td></tr></tbody> </table> <div style=\" color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; line-height: 1.2; padding-top: 0px; padding-right: 10px; padding-bottom: 0px; padding-left: 10px; \" > <div style=\" line-height: 1.2; font-size: 12px; color: #555555; font-family: Arial, Helvetica Neue, Helvetica, sans-serif; mso-line-height-alt: 14px; \" > <p style=\" font-size: 10px; line-height: 1.2; word-break: break-word; text-align: center; mso-line-height-alt: 12px; margin: 0; \" ><span style=\"font-size: 10px\" >Don\'t reply to this email, it was generated automatically. </span></p > <p style=\" font-size: 10px; line-height: 1.2; word-break: break-word; text-align: center; mso-line-height-alt: 12px; margin: 0; \" ><span style=\"font-size: 10px\" >If you have any questions, please contact our support directly.</span ></p > </div></div></div></div></div></div></div></div></td></tr></tbody> </table> </body></html>"


userDoesNotExistStr :: T.Text
userDoesNotExistStr = "Hey,\n\nSomebody just requested a password reset link to be sent to this very email address, however there is no account asociated with it.\n\nIf you didn\'t make this request, you can safely ignore this email, otherwise please make sure that you\'re entering an email address which is connected to your Request 2 account.\n\nRegards,\nThe Request 2 team\n\n(Don\'t reply to this email, it was generated automatically. If you have any questions, please contact our support directly.)"


userDoesNotExistMail :: Config -> Address -> IO Mail
userDoesNotExistMail cfg to =
    htmlMail'
        cfg
        to
        "Password reset for your Request 2 account"
        userDoesNotExistStr
        userDoesNotExistHtml
        [InlineImage "HeaderImage" (ImageFilePath "frontend/src/assets/request2.png") "requestLogo.png"]